PATH=/usr/bin:/usr/local/bin
SHELL=/bin/zsh

MAILDIR=$HOME/Mail
DEFAULT=$HOME/Mail/inbox

# Custom log directory
LOGFILE=$HOME/logs/procmail.log

# Custom recipes
#
# Discussion groups
#

:0: # Change this so that it sorts by the digest group
* ^(From):(\/.*).*\<group-digests@linkedin.com\>
`echo $MATCH | awk '{$NF=""}1' | sed 's/ //g'`

# Stolen from: http://bethesignal.org/dotfiles/procmailrc.html

# ARTFUL PROCMAIL ALERT!
# Here are two rules that will automagically filter *most* list emails based on
# sane matches, such as list id. Very funky, and you almost never have to deal
# with folder-making for lists again.

# MOST LISTS - Automagically handle lists
:0
* ^((List-Id|X-(Mailing-)?List):(.*[<]\/[^>]*))
{
  LISTID=$MATCH

  :0:
  * LISTID ?? ^\/[^@\.]*
  $MATCH
}

# MAJORDOMO - Automagically handle Majordomo lists
:0
* ^Sender: owner-[^@]+@[^@\+]+
* ^Sender: owner-\/[^@\+]+
{
  :0:
  $MATCH
}

:0: # PR crap from various sites
* ^(From|Subject):.*(sale|sell|offers|discount|marketing|feedback)
pr-bumph

:0: # Personal services
* ^(From|Subject):.*(account|billing|newrelic)
paid-services

:0: # Recruitment minutia
* ^Subject:.*(php|perl|.net|vb|javascript)
recruitment-noobs

:0: # Recruitment minutia
* ^Subject:.*(ruby|rails|erlang|recruitment)
recruitment

#
# Social
#
:0:
* ^From.*postmaster.twitter.com
twitter

# Some socmeds use listservs so this should 
# go after filtering mail servers
#
:0:
* ^From.*(facebookmail|uberlife|klout|twitter|branchout|meetup|schoolfeed)
socmed

#
# Catch the rest
:0:
* .*
inbox
